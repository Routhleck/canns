场景4: 端到端研究工作流
========================

通过交互式 ASA TUI（Attractor Structure Analyzer）完成从数据加载到分析与可视化的完整研究流程，
无需深入了解模型实现细节。

教程
----

.. toctree::
   :maxdepth: 1
   :caption: 研究流水线

   01_asa_tui

概述
----

本场景展示了基于 ASA TUI 的端到端分析流程，面向实验神经科学家与研究人员，
提供可视化界面来完成预处理、TDA、解码与结果浏览。

**教程1: ASA TUI 端到端分析**

- 交互式界面完成数据准备、预处理、分析与结果导出
- 支持 ASA ``.npz`` 与 Neuron + Trajectory 双输入模式
- 内置 TDA / CohoMap / PathCompare / CohoSpace / FR / FRM / GridScore
- 结果自动归档并提供日志与预览

谁应该使用流水线？
------------------

**非常适合**:

- 没有深厚编码专业知识的实验神经科学家
- 快速原型设计和探索性分析
- 多个数据集的标准化处理
- 出版质量的图表生成
- 教学和演示

**在以下情况下考虑手动方法**:

- 实现非标准模型架构
- 开发新的分析方法
- 需要对每个步骤进行精细控制
- 扩展流水线功能

学习路径
--------

**快速入门**:

1. 准备 ASA 或 Neuron + Trajectory 数据
2. 启动 ASA TUI 并选择输入文件
3. 预处理与分析参数采用默认值运行
4. 在 Results 目录中查看输出并按需调参

**进阶用法**:

- 批量处理多个会话（切换工作目录与输入文件）
- 细化 TDA/解码/可视化参数
- 将生成的中间结果接入自定义分析
- 与现有实验工作流集成

前置要求
--------

- 基本的Python知识
- 了解您的实验数据格式（spike/x/y/t）
- 能在终端中运行命令

预计时间
--------

- 教程1: 35-45分钟
- 为您自己的数据设置: 15-30分钟
- 总计: 70分钟

流水线特性
----------

ASA TUI 提供：

- **交互式流程**——界面化完成预处理与分析
- **自动数据验证**——检查输入格式与缺失字段
- **TDA + 解码**——持久同调、相位解码与对比
- **可视化套件**——CohoMap/CohoSpace/FR/FRM/GridScore
- **结果归档**——按数据集自动分目录保存
- **日志与缓存**——运行日志与阶段缓存复用

数据输入格式
------------

支持两类输入：

- **ASA ``.npz`` **：包含 ``spike`` / ``t`` （可选 ``x`` / ``y``）
- **Neuron + Traj ``.npz`` **：神经元文件包含 ``spike``；轨迹文件包含 ``x`` / ``y`` / ``t``

下一步
------

完成本场景后：

- 将 ASA TUI 应用于真实实验数据
- 基于生成的中间结果开展自定义分析
- 参考 ``canns.pipeline.asa`` 扩展新功能
- 为库贡献新的分析模块
